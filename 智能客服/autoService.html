<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./autoService.css">
</head>

<body>
    <div id="container">
        <div class="title">在线客服</div>
        <div id="content">
            <div id="scroll">
                <ul id="save">
                    <li class="timeTag"><span>在线客服为你服务</span></li>
                    <li class="timeTag"><span class="span">时间</span></li>
                    <li class="showTxt left">
                        <div class="leftTxt">
                            <img src="./img/clientAvatar.jpg" alt="" class="showImg leftImg">
                            <div class="txtContainer">
                                <div class="aiTxt"> 你好，有什么可以帮忙的</div>
                                <div class="triIcon"></div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div id="edit">
            <input type="text" name="" id="txt" placeholder="请输入咨询内容....">
            <input type="button" name="" value="发送(S)" id="btn">
        </div>
    </div>

    <script type="text/javascript">
        //获取元素
        var oCont = document.getElementById('content');
        var oTxt = document.getElementById('txt');
        var oBtn = document.getElementById('btn');
        var oSTxt = document.getElementsByClassName('showTxt');
        var oSave = document.getElementById('save');
        var timeSpan = document.getElementsByClassName('span')[0];

        var date = new Date();
        let newDate = date.toLocaleString('chinese', { 'hour12': false }).split(' ')[1];
        timeSpan.innerText = newDate;
        //发送事件
        oBtn.onclick = function () {
            addCon();
        }
        function addCon() {
            //定义需要添加的元素
            var newLi = document.createElement("li");
            //判断聊天的对象是哪一方，文字框出现在左边还是右边
            var timer = null;
            //添加对话框  
            if (oTxt.value) { // 如果输入内容存在
                clearInterval(timer);
                newLi.innerHTML = ` <div class="txtContainer">
                                        <div class="userText"> ${oTxt.value}</div>
                                        <div class="triIcon rightIcon"></div>
                                    </div>    
                                    <img src="./img/avatar.jpg" class="showImg rightImg" />
                                    `;
                newLi.className = 'showTxt right';
                oSave.appendChild(newLi);

                timer = setTimeout(function () {
                    var li = document.createElement('li');
                    li.className = "showTxt left"
                    li.innerHTML = ` <div class="leftTxt">
                                         <img src="./img/clientAvatar.jpg" alt="" class="showImg leftImg">
                                         <div class="txtContainer">
                                             <div class="aiTxt"> 我是棒棒的客服，有什么可以帮您</div>
                                            <div class="triIcon"></div>
                                         </div>
                                     </div>`
                    oSave.appendChild(li);
                    oTxt.value = '';
                }, 1000);
                oTxt.value = '';
            } else {
                return;
            }

        }

    </script>
</body>

</html>